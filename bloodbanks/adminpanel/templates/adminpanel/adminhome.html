{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BloodBank</title>
   
    <link href="{% static 'adminpanel/css/home.css' %}" rel="stylesheet">
    <script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
    </script>
    <link rel="stylesheet" type="text/css" href=" {% static 'adminpanel/css/form/util.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/css/form/main.css' %}">

    <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/css/vendor/bootstrap/css/bootstrap.min.css' %}">
    <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/css/vendor/animate/animate.css' %}">
    <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/css/vendor/css-hamburgers/hamburgers.min.css' %}">
    <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/css/vendor/select2/select2.min.css' %}">
    <!--===============================================================================================-->

    <link rel="stylesheet" type="text/css" href="{% static 'adminpanel/font-awesome-4.7.0/css/font-awesome.min.css' %}">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.13.0/js/mdb.min.js"></script>

<!--for hashing-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha512/0.8.0/sha512.js"></script>


    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.13.0/css/mdb.min.css" rel="stylesheet">


 
    <script src="{% static 'adminpanel/js/main.js' %}"></script>
    <script src="{% static 'adminpanel/js/home.js' %}"></script>

</head>
<body>
<div class="nav_bar">
    <div class="navimage">
        <img src="{% static 'adminpanel/img/drop.png' %}" alt="drop">
    </div>
<div class="navname">
    <h2>Blood Bank</h2>
</div>
<div class="navbutton">
    <button onclick="change()">Register</button>
</div>

</div>
<div class="form">
    <div class="login">
        <div class="wrap-contact2" style="padding-top: 1rem;"> 
            <form class="contact2-form validate-form" action="login" method="POST" >
                {% csrf_token %}
                <span class="contact2-form-title">
                    Login
                </span>

                <div class="wrap-input2 validate-input" data-validate="Valid email is required: ex@abc.xyz">
                    <input class="input2" type="email" name="email" required>
                    <span class="focus-input2" data-placeholder="EMAIL"></span>
                </div>

                <div class="wrap-input2 validate-input" data-validate = "Password is required">
                    <input class="input2" type="password" name="password" required>
                    <span class="focus-input2" data-placeholder="PASSWORD"></span>
                </div>

                <div class="container-contact2-form-btn">
                    <div class="wrap-contact2-form-btn">
                        <div class="contact2-form-bgbtn"></div>
                        <button class="contact2-form-btn">
                            Submit
                        </button>
                    </div>
                    <div class="wrap-contact2-form-btn">
                        <div class="contact2-form-bgbtn"></div>
                        <button class="contact2-form-btn reset">
                            Reset
                        </button>
                    </div>
                </div>

            </form>
        </div>
        <p style="text-align:center;">Not Registered ? <a onclick="change()">Register</a></p>  
    </div>
    <div class="signup">
        <div class="wrap-contact2" style="padding-top: 1rem;">
            <form class="contact2-form validate-form" action="register/create" method="POST" id="registerform">
                {% csrf_token %}
                <span class="contact2-form-title">
                    Register
                </span>

                <div class="wrap-input2 validate-input" data-validate="Name is required">
                    <input class="input2" type="name" name="name" required>
                    <span class="focus-input2" data-placeholder="ORGANISATION NAME"></span>
                </div>

                <div class="wrap-input2" data-validate = "Valid email is required: ex@abc.xyz">
                    <input class="input2" type="email" name="email" required>
                    <span class="focus-input2" data-placeholder="EMAIL"></span>
                </div>
                
                <div class="wrap-input2 validate-input" data-validate = "Password id required">
                    <input class="input2" type="password" name="password" id="pass" required>
                    <span class="focus-input2" data-placeholder="PASSWORD"></span>
                    <button id="see_pass" style="float: right; border: none; display: none;"><i class="fas fa-eye"></i></button>
                </div>
                
                <div class="wrap-input2 validate-input" data-validate = "Confirm Your Password">
                    <input class="input2" type="password" name="password" id="conpass" required>
                    <span class="focus-input2" data-placeholder="CONFIRM PASSWORD"><p id="mismatch">Mismatch</p></span>
                </div>
                        <div class="wrap-input2 validate-input" data-validate = "Enter full address here">
                    <input class="input2" type="text" name="address" required>
                    <span class="focus-input2" data-placeholder=" FULL ADDRESS"></span>
                </div>

                <div class="wrap-input2 validate-input" data-validate ="Enter your locality pincode">
                    <input class="input2" type="number" name="pincode" required>
                    <span class="focus-input2" data-placeholder="PINCODE"></span>
                </div>

                <div class="select" >
                    <select id="selectState" onchange="selectcity()" name="state" required>
                        <option selected disabled>Select State</option>
                    </select>
                    <select id="selectCity" name="city" required>
                        <option selected disabled>Select City</option>
                    </select>
                </div>
                <p id="required_msg">*State and City is required*</p>

                
                <div class="container-contact2-form-btn">
                    <div class="wrap-contact2-form-btn">
                        <div class="contact2-form-bgbtn"></div>
                        <button class="contact2-form-btn" id="submitform">
                            Submit
                        </button>
                    </div>
                    <div class="wrap-contact2-form-btn">
                        <div class="contact2-form-bgbtn"></div>
                        <button class="contact2-form-btn reset">
                            Reset
                        </button>
                    </div>
                </div>
                </form>
        </div>
        <p style="text-align: center;">Already Registered ? <a onclick="change()">Login</a></p>
    </div>
</div>

<!--geocode start-->
<script>
var arr = ['Andhra Pradesh',
'Arunachal Pradesh',
'Assam',
'Bihar',
'Chhattisgarh',
'Goa',
'Gujarat',
'Haryana',
'Himachal Pradesh',
'Jammu and Kashmir',
'Jharkhand',
'Karnataka',
'Kerala',
'Madhya Pradesh',
'Maharashtra',
'Manipur',
'Meghalaya',
'Mizoram',
'Nagaland',
'Odisha',
'Punjab',
'Rajasthan',
'Sikkim',
'Tamil Nadu',
'Telangana',
'Tripura',
'Uttarakhand',
'Uttar Pradesh',
'West Bengal',
'Andaman and Nicobar Islands',
'Chandigarh',
'Dadra and Nagar Haveli',
'Daman and Diu',
'Delhi',
'Lakshadweep',
'Puducherry'];
for(var i=0 ;i<arr.length;i++){
    var str = "<option value='"+(i+3)+"' >"+arr[i]+"</option>"
    $("#selectState").append(str);
}
function selectcity(){
   var stateName = $( "#selectState option:selected" ).text();

    $.ajax({
        url : 'https://indian-cities-api-nocbegfhqg.now.sh/cities',
        data : {State: stateName},
        success : function(cities){
            $("#selectCity").empty()
            $("#selectCity").append("<option disabled selected>Select City</option>")
            if(cities.length == 0){
               var str =  $("#selectState option:selected").text()
                $("#selectCity").append("<option>"+str+"</option>")
            }
            else{
            for(var i=0;i<cities.length;i++){
                var temp = cities[i].City
                var str = "<option value='"+temp+"' >"+temp+"</option>"
                $("#selectCity").append(str)
            }
            }
        }
    })

}
$(".reset").click(function(event){
    event.preventDefault();
    $("input").text("");
    $("input").val("");
    $("#selectCity").empty();
    $("#selectCity").append("<option>Select City</option>")
    $('#selectState option:contains("Select State")').prop('selected', true)
})
$("#submitform").click(function(event){
      var state_selected = $("#selectState option:selected").text();
    var city_select = $("#selectCity option:selected").text();
    if(state_selected == "Select State" || city_select == "Select City"){
        event.preventDefault();
        $("#required_msg").css({'display':'block'})
    }
    else{
        var password = $("#pass").val();
        var confirm_password = $("#conpass").val();
        if(password != confirm_password) {
            event.preventDefault();
            $("#mismatch").css({'display':'block'})
        }
        else{
            var hash = $("#pass").val();
            $("#pass").val() = sha512(hash);
            $("#required_msg").css({'display':'none'})
        $("#registerform").submit();
        }
    }

})

$("#pass , #conpass").keyup(function(){
    if($("#pass").val() != "" || $("#conpass").val() != ""){
    $("#see_pass").css({'display':'inline'});
    }
    else{
        $("#mismatch").css({'display':'none'});
        $("#see_pass").css({'display':'none'});
    }
})
$("#see_pass").click(function(event){
    event.preventDefault();
    if($("#pass , #conpass").attr("type") == "password"){
    $("#pass , #conpass").attr("type","text")
    }
    else{
        $("#pass , #conpass").attr("type","password") 
    }
})

</script>
<script src="{% static 'adminpanel/css/vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<!--===============================================================================================-->
	<script src=" {% static 'adminpanel/css/vendor/bootstrap/js/popper.js' %}"></script>
	<script src="{% static 'adminpanel/css/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'adminpanel/css/vendor/select2/select2.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'adminpanel/js/main.js' %}"></script>



</body>
</html>
